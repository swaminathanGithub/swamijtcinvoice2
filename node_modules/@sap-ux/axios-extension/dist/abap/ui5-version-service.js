"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UI5VersionService = void 0;
const axios_1 = require("axios");
/**
 * The service implements a request for getting the UI5 framework version on ABAP system
 * with the bootstrap api.
 */
class UI5VersionService extends axios_1.Axios {
    /**
     * The base endpoint path used by this service for requests.
     */
    static PATH = '/sap/public/bc/ui5_ui5';
    /**
     * Instance of the logger.
     */
    log;
    /**
     * The method returns a valid version of the UI5 framework on the ABAP system
     * or throws an error if the version is not provided, malformed or there are
     * connectivity issues or server errors.
     *
     * @returns The UI5 version on the ABAP system.
     */
    async getUI5Version() {
        try {
            const response = await this.get('/bootstrap_info.json', {
                transformResponse: (data) => JSON.parse(data)
            });
            const { Version: version } = response.data;
            if (!version) {
                throw new Error('UI5 version not provided.');
            }
            return version;
        }
        catch (error) {
            this.log.error('Could not get UI5 Version.');
            this.log.debug(error);
            throw error;
        }
    }
}
exports.UI5VersionService = UI5VersionService;
//# sourceMappingURL=ui5-version-service.js.map